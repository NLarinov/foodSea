# FoodSea

Мобильное iOS-приложение для оптимизации продуктовой корзины. Помогает пользователям минимизировать стоимость покупок путём сравнения цен в нескольких магазинах и автоматического распределения заказа.

## Возможности

- **Каталог продуктов** — просмотр товаров с фильтрацией по категориям, брендам и ценам
- **Поиск** — мгновенный поиск с дебаунсом 300 мс по названию, бренду и категории
- **Сканер штрихкодов** — поиск товара через камеру устройства
- **Голосовой ввод** — добавление товаров голосом (распознавание речи + NER)
- **Корзина** — управление списком покупок с изменением количества
- **Оптимизация** — автоматический расчёт минимальной стоимости с учётом доставки, акций и замен
- **Заказы** — оформление, отслеживание статуса, история
- **Push-уведомления** — статус заказа в реальном времени
- **Live Activity** — виджет на экране блокировки для активных доставок

## Архитектура

**MVVM + Coordinator + Repository** с использованием **Combine** для реактивных привязок данных.

### Слои

| Слой | Ответственность |
|------|-----------------|
| **Presentation** | ViewController, ViewModel (Combine), Coordinator (навигация) |
| **Domain** | Доменные модели (структуры), менеджеры |
| **Data** | Репозитории, APIClient, кэширование, персистентность |
| **Core** | Расширения, протоколы, константы, DI-контейнер |

### Паттерны

- **Coordinator** — навигация вынесена из ViewController'ов. `AppCoordinator` управляет `UITabBarController`, каждый таб имеет свой Coordinator.
- **MVVM** — ViewModel хранит состояние экрана, View подписывается через Combine (`@Published`).
- **Repository** — абстрагирует источник данных (сеть / кэш). ViewModel зависит от протоколов, не от реализаций.
- **Dependency Injection** — контейнер `Dependencies` создаётся один раз и передаётся через конструкторы.

### Навигация

```
UITabBarController
├── Главная     → Каталог → Детали товара, Поиск, Сканер, Голос
├── Категории   → Список категорий → Детали товара
├── Корзина     → Оптимизация → Оформление
└── Заказы      → История → Детали заказа
```

## Структура проекта

```
foodSea/
├── App/                          — AppDelegate, SceneDelegate, AppCoordinator
├── Core/
│   ├── Protocols/                — Базовые протоколы (Coordinator и др.)
│   ├── DI/                       — Контейнер зависимостей
│   ├── Extensions/               — Расширения UIKit/Foundation
│   ├── Constants/                — Конфигурация, константы
│   └── Utilities/                — Вспомогательные утилиты (Debouncer, ImageLoader)
├── Models/
│   ├── Domain/                   — Доменные модели (Product, CartItem, Order)
│   └── DTO/                      — Codable-структуры для API
├── Services/
│   ├── Network/                  — APIClient, Endpoint, обработка ошибок
│   ├── Cache/                    — Менеджер кэширования
│   ├── Persistence/              — UserDefaults, Keychain
│   └── Managers/                 — CartManager и др.
├── Repositories/                 — Репозитории (Product, Cart, Order)
├── Modules/
│   ├── Onboarding/               — Онбординг (первый запуск)
│   ├── Catalog/                  — Каталог продуктов
│   ├── Search/                   — Поиск и фильтры
│   ├── ProductDetail/            — Детальная страница товара
│   ├── Cart/                     — Корзина
│   ├── BarcodeScanner/           — Сканер штрихкодов
│   ├── VoiceInput/               — Голосовой ввод
│   ├── Optimization/             — Результаты оптимизации
│   ├── Orders/                   — Заказы и история
│   └── Notifications/            — Push-уведомления, Live Activity
└── Resources/                    — Assets, Localizable.strings, Info.plist
```

Каждый модуль содержит:
```
Module/
├── Coordinator/   — Навигация модуля
├── ViewModel/     — Логика и состояние
└── View/          — ViewController и кастомные View
```

## Стек технологий

| Компонент | Технология |
|-----------|-----------|
| Язык | Swift |
| UI | UIKit + SwiftUI (через UIHostingConfiguration) |
| Реактивность | Combine |
| Сеть | URLSession + async/await |
| Хранение | UserDefaults (корзина), Keychain (токены) |
| Бэкенд | Go REST API |
| База данных | PostgreSQL |
| Кэш сервера | Redis |
| ML-модули | Python (эмбеддинги, распознавание речи) |
